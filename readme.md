# Yeaz Output Analysis

[![python](https://img.shields.io/badge/Python-3.9-3776AB.svg?style=flat&logo=python&logoColor=white)](https://www.python.org)
[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

### A suite of analysis tools for investigating yeast behavior under nitrogen-limited conditions

The Yeaz Output Analysis package is a collection of tools designed to aid the analysis of microscopy images of yeast cells. Specifically, it is designed to process nd2 files combined with the output segmentation mask h5 file provided by [YeaZ](https://www.nature.com/articles/s41467-020-19557-4), a software tool that allows the segmentation of yeast cells in microscopy images. The package provides a convenient way to process the intracellular localization of the green fluorescent channel of the nd2 file using the segmentation file generated by YeaZ.

### Repository Organization
The Yeaz Output Analysis repository is organized into several folders:

- **Pipeline:** This folder includes files relating to the characterization of the two subpopulations that form under yeast nitrogen limitation and the differences in transcription factor activity between them.
- **Z_analysis**: This folder is related to the isolation of the peak fluorescence localization score for cells that have been imaged in multiple Z-stack planes.
- **Highlight Cells**: This folder is used to annotate the original nd2 file with colored outlines corresponding to cells belonging to each of the two subpopulations, providing a visual inspection of the subpopulation characterization.
- **Flow Data Analysis**: This folder inspects the accuracy of the pipeline being used as a flow cytometer replacement. It compares FACS data with microscopy data for size and mean red fluorescence.
- **Tracking Analysis**: This folder includes files relating to the temporal behavior of each subpopulation, looking into the division and growth rate of each subpopulation with time.
### Repository Housekeeping
This repository is formatted with [black](https://black.readthedocs.io/en/stable/), a Python formatter that helps maintain code readability and consistency. It is used to ensure that code is formatted consistently throughout the repository.

### Pipeline
1. Obtain nd2 file from microscope
2. Before using this repo, you should obtain a h5 cell mask file corresponding to the nd2 file using YEAZ. Now you should have the two input files ready to progress with this pipeline. This can be done using the gui or the cli
3. As these files are often very big, we use the file `pipeline/build_cell_dataframe.py` to aggregate the nd2 file and the h5 mask file into a pkl file (a file holding a pandas dataframe). This file holds a dataframe of all cells within the nd2 file along with relevant metrics such as cell-size, meanflourescence or a custom score. Please edit this file for your own applications
4. Once you have the pkl file, the saved variation of the pandas dataframe containing rows for each cell. Most other files in the pipeline folder begin with reading the dataframe back into a variable for filtering, mapping through it in different ways. Such as assigning the cells to sub populations, or aggregating cell statistics by location. Browse the `pipeline` folder for inspiration

